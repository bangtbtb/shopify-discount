# Graphql
query getDiscount($id: ID!) {
  discountNode(id: $id) {
    __typename
    id
    discount {
      __typename
      ... on DiscountCodeApp {
        codes(first: 100) {
          edges {
            node {
              id
              code
              asyncUsageCount
            }
          }
        }
        appliesOncePerCustomer
        asyncUsageCount
        discountId
        appDiscountType {
          targetType
          discountClass
        }
        combinesWith {
          orderDiscounts
          productDiscounts
          shippingDiscounts
        }
      }
      ... on DiscountAutomaticApp {
        title

        appDiscountType {
          title
        }
        combinesWith {
          __typename
          orderDiscounts
          productDiscounts
          shippingDiscounts
        }
        appDiscountType {
          title
          functionId
        }

        startsAt
        endsAt
        createdAt
      }
    }
    metafields(first: 100, namespace: "app--138664345601--vol_discount") {
      nodes {
        id
        key
        type
        value
        namespace
      }
    }
  }
}
