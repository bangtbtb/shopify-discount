<head></head>

<body>
  <div>
    <p>Product title: {{ product.title }}</p>
    <button onclick="onClickButton()">Button test</button>
  </div>
</body>
<script>
  function getVolumeDiscount() {
    var host = window.location.host;
    return new Promise(async (resolve, reject) => {
      try {
        var resp = await fetch(`https://${host}/apps/pick-vd`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*',
          },
        });
        console.log('Response of volume discount: ', resp);
        if (!resp.ok) {
          console.log('Request failed');
        } else {
          var data = await resp.json();
          console.log('Discount: ', data);
        }
      } catch (err) {
        console.log('Get volume discount error: ', err);
      }
    });
  }

  function onClickButton() {
    console.log('Click button');
    getVolumeDiscount();
  }
</script>

{% schema %}
{
  "name": "Volume discount",
  "target": "section",
  "settings": []
}
{% endschema %}
